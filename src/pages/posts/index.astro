---
import Layout from "$layouts/Main.astro";
import BlogListItem from "$lib/components/BlogListItem.astro";
import LabListItem from "$lib/components/LabListItem.astro";
import { getCollection } from "astro:content";

// TODO: rename "blog" to something like "writing" if we like this idea
const writing = await getCollection("blog");
const labs = await getCollection("labs");

const posts = [...writing, ...labs];

posts.sort((a, b) => (a.data.created < b.data.created ? 1 : -1));
---

<Layout
  title="Blog â€¢ Ed Gargan"
  description="Blog posts, experiments, and doodles for web people"
>
  <main>
    <ul>
      {
        posts.map((post, i) => {
          if (post.collection === "blog") {
            return (
              <li>
                <PostListItem {post} {i} bigHeader />
              </li>
            );
          } else if (post.collection === "labs") {
            return (
              <li>
                <LabListItem {post} {i} />
              </li>
            );
          }
        })
      }
    </ul>
  </main>
</Layout>

<style>
  main {
    margin-top: 48px;
  }

  @media (max-width: 640px) {
    main {
      margin-top: 32px;
    }
  }
</style>
